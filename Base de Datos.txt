create database horario;
use horario;


CREATE TABLE horarios_creados (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL
);


create table profesor 
(id int primary key auto_increment,
id_h int ,
nombre_p varchar (45),
curso varchar (45),
bloques varchar(45),
turno varchar(45),
numerico varchar(5),
foreign key (id_h) references horarios_creados (id) ON DELETE CASCADE
);

create table registro
(id_r int primary key auto_increment,
id_p int not null,
disponibilidad_i varchar(45),
disponibilidad_f varchar(45),
dia varchar (45),
tiempo varchar(45),
direccion varchar(45),
turno varchar(45),
valor varchar(45),
foreign key (id_p) references profesor (id) ON DELETE CASCADE
);
CREATE TABLE `examenes` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `direccion` VARCHAR(255) NOT NULL,
    `id_h` INT NOT NULL,
    `turno` VARCHAR(50) NOT NULL,
    foreign key (id_h) references horarios_creados (id) ON DELETE CASCADE
);
create table preferencias
(
preferenciaId int primary key auto_increment,
id_r int,
id_h varchar(45),
id_p int,
direccion varchar(45),
turno varchar(45),
numerico varchar(45),
nombre varchar(45),
foreign key (id_h) references horarios_creados (id) ON DELETE CASCADE,
foreign key (id_p) references profesor (id) ON DELETE CASCADE,
foreign key (id_r) references registro (id_r) ON DELETE CASCADE
);
use horario;
CREATE TABLE `horario`.`horarios_generados` (
  `idhorarios_generados` INT NOT NULL AUTO_INCREMENT,
   nombre_horario varchar(100) null,
  `nombre_p` VARCHAR(45) NULL,
  `curso` VARCHAR(45) NULL,
  `turno` VARCHAR(45) NULL,
  `id_h` INT NULL,
  `id_p` INT NULL,
  `direccion` VARCHAR(45) NULL,
  `bloques` VARCHAR(45) NULL,
  `numerico` int NULL,
  creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  foreign key (id_h) references horarios_creados (id) ON DELETE CASCADE,
  foreign key (id_p) references profesor (id) ON DELETE CASCADE,
  PRIMARY KEY (`idhorarios_generados`));
  
  CREATE TABLE color (
    id_color INT AUTO_INCREMENT PRIMARY KEY,
     `id_h` INT NULL,
    color VARCHAR(50) NOT NULL,
    direccion VARCHAR(50) NOT NULL,
    numerico int NOT NULL,
    foreign key (id_h) references horarios_creados (id) ON DELETE CASCADE
);






